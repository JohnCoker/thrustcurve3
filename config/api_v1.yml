swagger: "2.0"
info:
  title: ThrustCurve.org API
  description: Programmatic access to ThrustCurve.org motor and simulator file database.
  contact:
    name: John Coker
    url: http://www.thrustcurve.org/api.html
    email: john@jcsw.com
  license:
    name: ISC
    url: https://opensource.org/licenses/ISC
  version: 1.0.0

host: localhost:3000
basePath: /api/v1
consumes:
- application/json
- text/xml
- application/x-www-form-urlencoded
produces:
- application/json
- text/xml

paths:
  /metadata.json:
    get:
      description: Gets metadata about all motors in the database.
      consumes:
      - application/x-www-form-urlencoded
      produces:
      - application/json
      parameters:
      - name: manufacturer
        in: query
        description: manufacturer name or abbreviation
        type: string
        required: false
      - name: impulseClass
        in: query
        description: letter class of motor
        type: string
        required: false
      - name: diameter
        in: query
        description: motor diameter in mm
        type: number
        required: false
      - name: type
        in: query
        description: motor type
        type: string
        enum:
        - SU
        - reload
        - hybrid
        required: false
      - name: certOrg
        in: query
        description: certification organization name or abbreviation
        type: string
        required: false
      - name: availability
        in: query
        description: motor current availability
        type: string
        enum:
        - regular
        - occasional
        - OOP
        - available
        - all
        required: false
      responses:
        '200':
          description: metadata response
          schema:
            $ref: '#/definitions/MetadataResponse'
    post:
      description: Gets metadata about all motors in the database.
      consumes:
      - application/x-www-form-urlencoded
      - application/json
      produces:
      - application/json
      parameters:
      - name: body
        in: body
        schema:
          $ref: '#/definitions/MetadataRequest'
      responses:
        '200':
          description: metadata response
          schema:
            $ref: '#/definitions/MetadataResponse'

definitions:
  MetadataRequest:
    type: object
    description: metadata query criteria
    properties:
      manufacturer:
        description: manufacturer name or abbreviation
        type: string
        required: false
      impulseClass:
        description: letter class of motor
        type: string
        required: false
      diameter:
        description: motor diameter in mm
        type: number
        required: false
      type:
        description: motor type
        type: string
        enum:
        - SU
        - reload
        - hybrid
        required: false
      certOrg:
        description: certification organization name or abbreviation
        type: string
        required: false
      availability:
        description: motor current availability
        type: string
        enum:
        - regular
        - occasional
        - OOP
        - available
        - all
        required: false

  MetadataResponse:
    type: object
    description: motor metadata
    properties:
      manufacturers:
        type: array
        description: motor manufacturers
        items:
          $ref: '#/definitions/NameAndAbbrev'
      certOrgs:
        type: array
        description: certification organizations
        items:
          $ref: '#/definitions/NameAndAbbrev'
      types:
        type: array
        description: motor types
        items:
          type: string
      diameters:
        type: array
        description: motor diameters
        items:
          type: number
      impulseClasses:
        type: array
        description: total impulse letter classes
        items:
          type: string

  NameAndAbbrev:
    type: object
    description: full name and abbreviation
    properties:
      name:
        type: string
        required: true
        description: full (official) name
      abbrev:
        type: string
        required: false
        description: most common abbreviation
